{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block scripts %}
    <script src="{% static 'accounts/index.js' %}"></script>
{% endblock scripts %}

{% block title %}
    {{athlete_profile.first_name}}'s profile

{% endblock title %}

{% block content %}

    <div class="text-center">
        <img src="{{athlete_profile.avatar.url}}" alt="my-profile" class="avatar-big">
    </div>

    <div id="alert-box-0"></div>
    <div id="alert-box-1"></div>

    <form action="" method="POST" enctype="multipart/form-data" class="profile-form">
        {% csrf_token %}
        {{athlete_profile_form|crispy}}
        Account Information:
        {{user_form|crispy}}
        <button type="submit" class="btn btn-primary mb-2 mt-2">Update</button>
    </form>
    
    <hr>

    <form action="" method="POST" enctype="multipart/form-data" id="change-password-btn" class="profile-form">
        <h2>Change Password</h2>
        {% csrf_token %}
        {{password_form|crispy}}
        <button type="submit" class="btn btn-primary mb-2 mt-2">Change Password</button>
    </form>

{% comment %} Scripts {% endcomment %}

<script type="text/javascript">

    if ({{profile_changed}}) {
        handleAlerts("success", "Successfully edited profile", "0");
    }

    switch ({{password_key}}) {

        case 0:
            handleAlerts("success", "Successfully changed password", "1");
            break;
        
        case 1:
            handleAlerts("danger", "Old password is incorrect", "1");
            break;
        
        case 2:
            handleAlerts("danger", "Passwords don't match", "1");
            break;

        default:
    }

</script>

{% endblock content %}

